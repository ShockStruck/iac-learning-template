# shellcheck disable=SC2148,SC2155
# IaC Learning Template - Environment Configuration
# This file is automatically loaded by direnv when you enter the directory

# SOPS Age key for secret encryption/decryption
export SOPS_AGE_KEY_FILE="$(pwd)/.secrets/age.key"

# Task runner configuration
export TASK_X_ENV_PRECEDENCE=1
export TASK_X_MAP_VARIABLES=0

# Docker Compose configuration
export COMPOSE_FILE="$(pwd)/docker-compose.yml"
export DOCKER_BUILDKIT=1
export COMPOSE_DOCKER_CLI_BUILD=1

# Development environment
export ENV=development
export LOG_LEVEL=info

# Path additions for local tools
PATH_add "$(pwd)/bin"
PATH_add "$(pwd)/scripts"

# Welcome message when entering the directory
if [ "$DIRENV_IN_ENVRC" != "1" ]; then
  echo "üèóÔ∏è  IaC Learning Template Environment Loaded"
  echo "üìÅ Working directory: $(pwd)"
  echo "üîê SOPS key: $SOPS_AGE_KEY_FILE"
  echo "üê≥ Compose file: $COMPOSE_FILE"
  echo
  echo "üöÄ Quick start:"
  echo "   task bootstrap  # Set up everything"
  echo "   task compose:up # Start the stack"
  echo "   task learn      # Show examples"
  echo
fi
